<?xml version="1.0" encoding="UTF-8"?>
<mdq:check xmlns:mdq="https://nceas.ucsb.edu/mdqe"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="https://nceas.ucsb.edu/mdqe ../schemas/schema1.xsd">
	<id>check.methods.present.1</id>
	<name>Methods present</name>
	<description>All datasets should contain a methods element, at a minimum a link to a separate methods doc.</description>
	<type>interpretation</type>
	<level>INFO</level>
	<environment>rscript</environment>
	<code><![CDATA[
check <- function() {
    # Recommended minimum word count
    minWordCount <- 7
    # Recommended max word count
    maxWordCount <- 20

    # Check that a <methods> section is present for the dataset.
    if(!methodsPresent) {
      status <- "FAILURE"
      output <- "A methods section is not present, so unable to check methods description."
      return(list(status = status, output = output))
    }
    #list(status=status, output=list(list(value=output)))
    
    # Now check that the methodStep descriptions are greater that 7 words
    if(length(methodsDescription) > 0) {
    wordCount <- length(unlist(strsplit(methodDescription, "\\s+", perl=T)))

    } 
    
    
    
    return(list(status = status, output = output))

}

  result <- check()
  mdq_result <- list(status=result$status, output=list(list(value=result$output)))
      ]]></code>
	<selector>
		<name>methodsPresent</name>
		<xpath>boolean(/eml/dataset/methods)</xpath>
	</selector>
	<selector>
		<name>methodsDescription</name>
		<xpath>/eml/dataset/methods/methodStep/description/para/text())</xpath>
	</selector>

	<dialect>
		<name>eml</name>
		<xpath>boolean(/*[local-name() = 'eml'])</xpath>
	</dialect>
</mdq:check>
